(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"305l":function(e,t,o){"use strict";o.r(t),o.d(t,"AuthModule",function(){return de});var n=o("ofXK"),r=o("fXoL"),i=o("Zr0/"),s=o("tyNb");let a=(()=>{class e{constructor(e,t,o){this.tokenStorageService=e,this.router=t,this.location=o}canActivate(e,t){return!this.tokenStorageService.isLoggedIn()&&"/"!==this.router.url||!this.tokenStorageService.isLoggedIn()&&"/"===this.router.url||!(!this.tokenStorageService.isLoggedIn()||"/"!==this.router.url)&&(this.location.back(),!1)}}return e.\u0275fac=function(t){return new(t||e)(r.Yb(i.a),r.Yb(s.f),r.Yb(n.g))},e.\u0275prov=r.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var l=o("3Pt+"),c=o("qfBg");let u=(()=>{class e{constructor(){}patternValidator(){return e=>e.value?new RegExp("^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9]).{8,}$").test(e.value)?null:{invalidPassword:!0}:null}MatchPassword(e,t){return o=>{const n=o.controls[e],r=o.controls[t];return n&&r?r.errors&&!r.errors.passwordMismatch?null:n.value!==r.value?void r.setErrors({passwordMismatch:!0}):void r.setErrors(null):null}}userNameValidator(e){return new Promise(t=>{setTimeout(()=>{this.validateUserName(e.value)?t({userNameNotAvailable:!0}):t(null)},1e3)})}validateUserName(e){return["ankit","admin","user","superuser"].indexOf(e)>-1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const d=["FotoPerfil"];function g(e,t){1&e&&(r.Rb(0,"div"),r.yc(1," Este campo es obligatorio. "),r.Qb())}function b(e,t){if(1&e&&(r.Rb(0,"div",31),r.wc(1,g,2,0,"div",32),r.Qb()),2&e){const e=r.dc();r.zb(1),r.ic("ngIf",null==e.getControl.name.errors?null:e.getControl.name.errors.required)}}function h(e,t){1&e&&(r.Rb(0,"div"),r.yc(1," Este campo es obligatorio. "),r.Qb())}function p(e,t){1&e&&(r.Rb(0,"div"),r.yc(1," Correo inv\xe1lido. "),r.Qb())}function f(e,t){if(1&e&&(r.Rb(0,"div",31),r.wc(1,h,2,0,"div",32),r.wc(2,p,2,0,"div",32),r.Qb()),2&e){const e=r.dc();r.zb(1),r.ic("ngIf",null==e.getControl.email.errors?null:e.getControl.email.errors.required),r.zb(1),r.ic("ngIf",null==e.getControl.email.errors?null:e.getControl.email.errors.email)}}function m(e,t){1&e&&(r.Rb(0,"div"),r.yc(1," Este campo es obligatorio. "),r.Qb())}function v(e,t){if(1&e&&(r.Rb(0,"div",31),r.wc(1,m,2,0,"div",32),r.Qb()),2&e){const e=r.dc();r.zb(1),r.ic("ngIf",null==e.getControl.password.errors?null:e.getControl.password.errors.required)}}function w(e,t){1&e&&(r.Rb(0,"span",31),r.yc(1," Es necesario confirmar la contrase\xf1a. "),r.Qb())}function _(e,t){1&e&&(r.Rb(0,"span",31),r.yc(1," Las contrase\xf1as no coinciden. "),r.Qb())}function R(e,t){if(1&e&&(r.Rb(0,"li"),r.yc(1),r.Qb()),2&e){const e=t.$implicit;r.zb(1),r.Ac(" ",e," ")}}function I(e,t){if(1&e&&(r.Rb(0,"div",33),r.Rb(1,"b"),r.yc(2,"Han ocurrido los siguientes errores:"),r.Qb(),r.Mb(3,"br"),r.Mb(4,"hr"),r.wc(5,R,2,1,"li",34),r.Qb()),2&e){const e=r.dc();r.zb(5),r.ic("ngForOf",e.errorsList)}}function O(e,t){1&e&&r.Mb(0,"div")}function M(e,t){1&e&&r.Mb(0,"div")}function C(e,t){1&e&&(r.Rb(0,"button",37),r.yc(1," Registrar Cuenta "),r.Qb())}function P(e,t){1&e&&(r.Rb(0,"button",38),r.Mb(1,"span",39),r.Mb(2,"span",39),r.Mb(3,"span",39),r.Qb())}function x(e,t){if(1&e&&(r.wc(0,M,1,0,"div",26),r.wc(1,C,2,0,"ng-template",null,35,r.xc),r.wc(3,P,4,0,"ng-template",null,36,r.xc)),2&e){const e=r.pc(2),t=r.pc(4),o=r.dc();r.ic("ngIf",!o.loading)("ngIfThen",e)("ngIfElse",t)}}function y(e,t){1&e&&(r.Rb(0,"button",40),r.yc(1," Registrar Cuenta "),r.Qb())}let S=(()=>{class e{constructor(e,t,o){this.formBuilder=e,this.userService=t,this.userValidations=o,this.createFailed=!1,this.loading=!1,this.existError=!1,this.errorsList=[]}ngOnInit(){activee($),this.registerForm=this.formBuilder.group({name:new l.d("",[l.r.required]),email:new l.d("",[l.r.required,l.r.email]),password:new l.d("",[l.r.required]),passwordconf:new l.d("",[l.r.required]),fotoPerfil:[""]},{validator:this.userValidations.MatchPassword("password","passwordconf")}),this.t1="Escoja la imagen"}onSubmit(){var e,t,o,n,r;this.loading=!0,this.errorsList=[],this.existError=!1,console.log(this.registerForm.value);const i=new FormData;i.append("archivo",null===(t=null===(e=this.registerForm)||void 0===e?void 0:e.get("fotoPerfil"))||void 0===t?void 0:t.value),i.append("name",null===(o=this.registerForm.get("name"))||void 0===o?void 0:o.value),i.append("email",null===(n=this.registerForm.get("email"))||void 0===n?void 0:n.value),i.append("password",null===(r=this.registerForm.get("password"))||void 0===r?void 0:r.value),this.userService.createUser(i).subscribe({next:e=>{console.log(e)},complete:()=>{this.loading=!1},error:e=>{e.error.errors.forEach(e=>{this.errorsList.push(e.msg)}),console.log(this.errorsList),this.existError=!0,this.loading=!1}})}onFileSelect(e,t){var o,n;if(0===t.length)return;if(null==t[0].type.match(/image\/*/))return void(this.message="Only images are supported.");const r=new FileReader;this.imagePath=t,r.readAsDataURL(t[0]);const i=e.target.files[0];this.fileInputLabel=i.name,"fotoPerfil"===e.target.id&&(this.t1=i.name,null===(n=null===(o=this.registerForm)||void 0===o?void 0:o.get("fotoPerfil"))||void 0===n||n.setValue(i),r.onload=e=>{this.imgURL=r.result})}get getControl(){return this.registerForm.controls}}return e.\u0275fac=function(t){return new(t||e)(r.Lb(l.c),r.Lb(c.a),r.Lb(u))},e.\u0275cmp=r.Fb({type:e,selectors:[["app-register"]],viewQuery:function(e,t){if(1&e&&r.Dc(d,1),2&e){let e;r.oc(e=r.cc())&&(t.fotoPerfil=e.first)}},decls:77,vars:11,consts:[[1,"property-submit-section","spad"],[1,"container"],[1,"row"],[1,"col","col-md-6","offset-md-3"],[1,"property-submit-form"],["novalidate","",3,"formGroup","ngSubmit"],[1,"text-center","row"],[1,"col-md-12"],["src","../../../../assets/img/logo.png","alt",""],[1,"col-md-6"],["for","inputEmail",1,"left"],["type","text","id","inputName","placeholder","Ingrese el nombre","name","name","formControlName","name","tooltip","Nombre del due\xf1o de la nueva cuenta.","required","","autofocus","",1,"form-control"],["class","text-danger",4,"ngIf"],["type","email","id","inputEmail","placeholder","Ingrese correo electr\xf3nico","name","email","formControlName","email","tooltip","Email para la nueva cuenta.","required","","autofocus","",1,"form-control"],["for","fotoPerfil",1,"left"],[1,"custom-file"],["type","file","id","fotoPerfil","name","fotoPerfil","aria-describedby","fotoPerfil","tooltip","Seleccionar imagen de perfil.","accept","image/*",1,"form-control","custom-file-input",3,"change"],["FotoPerfil",""],["for","customFile",1,"custom-file-label"],["for","password",1,"left"],["type","password","id","password","name","password","formControlName","password","tooltip","Nombre del due\xf1o de la nueva cuenta.","required","","autofocus","",1,"form-control"],["for","inputPassword",1,"left"],["type","password","id","inputPasswordConf","name","passwordconf","formControlName","passwordconf","tooltip","Nombre del due\xf1o de la nueva cuenta.","required","","autofocus","",1,"form-control"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"left"],["routerLink","/auth/login","routerLinkActive","active"],[4,"ngIf","ngIfThen","ngIfElse"],["thenBlock",""],["elseBlock",""],["aria-hidden","true",1,"fa","fa-heart"],["href","https://colorlib.com","target","_blank"],[1,"text-danger"],[4,"ngIf"],["role","alert",1,"alert","alert-danger"],[4,"ngFor","ngForOf"],["thenBlock1",""],["elseBlock1",""],["type","submit",1,"site-btn"],["type","button","disabled","",1,"site-btn"],["role","status","aria-hidden","true",1,"spinner-grow","spinner-grow-sm"],["type","submit","disabled","",1,"site-btn"]],template:function(e,t){if(1&e){const e=r.Sb();r.Rb(0,"section",0),r.Rb(1,"div",1),r.Rb(2,"div",2),r.Rb(3,"div",3),r.Rb(4,"div",4),r.Rb(5,"form",5),r.bc("ngSubmit",function(){return t.onSubmit()}),r.Rb(6,"div",6),r.Rb(7,"div",7),r.Mb(8,"img",8),r.Mb(9,"br"),r.Mb(10,"br"),r.Rb(11,"h4"),r.yc(12,"Registrarse en el Sistema"),r.Qb(),r.Qb(),r.Rb(13,"div",9),r.Rb(14,"p",10),r.yc(15,"Nombre:"),r.Qb(),r.Mb(16,"input",11),r.wc(17,b,2,1,"div",12),r.Mb(18,"br"),r.Mb(19,"br"),r.Qb(),r.Rb(20,"div",9),r.Rb(21,"p",10),r.yc(22,"Correo:"),r.Qb(),r.Mb(23,"input",13),r.wc(24,f,3,2,"div",12),r.Mb(25,"br"),r.Mb(26,"br"),r.Qb(),r.Rb(27,"div",7),r.Rb(28,"p",14),r.yc(29,"Foto de Perfil:"),r.Qb(),r.Rb(30,"div",15),r.Rb(31,"input",16,17),r.bc("change",function(o){r.qc(e);const n=r.pc(32);return t.onFileSelect(o,n.files)}),r.Qb(),r.Rb(33,"label",18),r.yc(34),r.Qb(),r.Qb(),r.Mb(35,"br"),r.Mb(36,"br"),r.Qb(),r.Rb(37,"div",7),r.Rb(38,"p",19),r.yc(39,"Contrase\xf1a:"),r.Qb(),r.Mb(40,"input",20),r.wc(41,v,2,1,"div",12),r.Mb(42,"br"),r.Mb(43,"br"),r.Qb(),r.Rb(44,"div",7),r.Rb(45,"p",21),r.yc(46,"Confirme la Contrase\xf1a:"),r.Qb(),r.Mb(47,"input",22),r.wc(48,w,2,0,"span",12),r.wc(49,_,2,0,"span",12),r.Mb(50,"br"),r.wc(51,I,6,1,"div",23),r.Mb(52,"br"),r.Qb(),r.Rb(53,"div",7),r.Rb(54,"p",24),r.yc(55," Posees una cuenta? "),r.Rb(56,"a",25),r.yc(57,"Iniciar sesi\xf3n"),r.Qb(),r.Qb(),r.Mb(58,"br"),r.Mb(59,"hr"),r.Mb(60,"br"),r.wc(61,O,1,0,"div",26),r.wc(62,x,5,3,"ng-template",null,27,r.xc),r.wc(64,y,2,0,"ng-template",null,28,r.xc),r.Mb(66,"br"),r.Mb(67,"br"),r.Mb(68,"hr"),r.Rb(69,"div"),r.Rb(70,"p"),r.yc(71," Copyright \xa9 "),r.yc(72," All rights reserved | This template is made with "),r.Mb(73,"i",29),r.yc(74," by "),r.Rb(75,"a",30),r.yc(76,"Colorlib"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()}if(2&e){const e=r.pc(63),o=r.pc(65);r.zb(5),r.ic("formGroup",t.registerForm),r.zb(12),r.ic("ngIf",t.getControl.name.touched&&t.getControl.name.invalid),r.zb(7),r.ic("ngIf",t.getControl.email.touched&&t.getControl.email.invalid),r.zb(10),r.zc(t.t1),r.zb(7),r.ic("ngIf",t.getControl.password.touched&&t.getControl.password.invalid),r.zb(7),r.ic("ngIf",t.getControl.passwordconf.touched&&(null==t.getControl.passwordconf.errors?null:t.getControl.passwordconf.errors.required)),r.zb(1),r.ic("ngIf",t.getControl.passwordconf.touched&&(null==t.getControl.passwordconf.errors?null:t.getControl.passwordconf.errors.passwordMismatch)),r.zb(2),r.ic("ngIf",t.existError),r.zb(10),r.ic("ngIf",t.registerForm.valid)("ngIfThen",e)("ngIfElse",o)}},directives:[l.s,l.k,l.f,l.b,l.j,l.e,l.q,n.k,s.i,s.h,n.j],styles:['#login[_ngcontent-%COMP%]{background-color:#fff;padding-left:3rem;padding-right:3rem;box-shadow:0 2px 4px 0 rgba(0,0,0,.25)}.left[_ngcontent-%COMP%]{float:left}.spad[_ngcontent-%COMP%]{padding-top:50px!important}.g-signin2[_ngcontent-%COMP%]{width:100%}#customBtn[_ngcontent-%COMP%]{display:inline-block;background:#fff;color:#757575;width:100%;border-radius:5px;box-shadow:0 2px 4px 0 rgba(0,0,0,.25);box-sizing:border-box;transition:background-color .218s,border-color .218s,box-shadow .218s;-webkit-user-select:none;-webkit-appearance:none;background-color:#fff;background-image:none;cursor:pointer;outline:none;overflow:hidden;position:relative;text-align:center;vertical-align:middle;white-space:nowrap}#customBtn[_ngcontent-%COMP%]:hover{cursor:pointer;box-shadow:0 2px 4px 0 rgba(0,255,0,.25)}span.label[_ngcontent-%COMP%]{font-family:Dosis,sans-serif;font-weight:400}span.icon[_ngcontent-%COMP%]{background:url(/assets/img/logo-google/g-normal.png) transparent 5px 50% no-repeat;width:42px;height:42px}span.buttonText[_ngcontent-%COMP%], span.icon[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}span.buttonText[_ngcontent-%COMP%]{padding-right:42px;font-size:14px;font-weight:700;font-family:Dosis,sans-serif}.espaciado[_ngcontent-%COMP%]{padding:2rem!important;background-color:#fff;border-radius:5px}.site-btn[_ngcontent-%COMP%]{width:100%!important}.image-uploader[_ngcontent-%COMP%]{min-height:5rem!important}.text-danger[_ngcontent-%COMP%]{float:left}.alert-danger[_ngcontent-%COMP%]{width:100%;float:left}b[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{float:left}.ng-valid.required[_ngcontent-%COMP%], .ng-valid[required][_ngcontent-%COMP%]{border-left:5px solid #00c89e}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}.alert[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#fed3d3;color:#820000;padding:1rem}.alert[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]{margin-bottom:1rem}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem}select[_ngcontent-%COMP%]{width:100%;padding:.5rem}.custom-file-label[_ngcontent-%COMP%]:after{color:#fff;content:"Browse";background-color:#00c89e}']}),e})();var E=o("4c9/"),k=o("XNiG"),Q=o("qgXg"),N=o("quSY"),T=o("pxpQ"),L=o("9ppp"),F=o("Ylt2");class z extends k.a{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,o){super(),this.scheduler=o,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new D(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,o=t?this._events:this._trimBufferThenGetEvents(),n=this.scheduler,r=o.length;let i;if(this.closed)throw new L.a;if(this.isStopped||this.hasError?i=N.a.EMPTY:(this.observers.push(e),i=new F.a(this,e)),n&&e.add(e=new T.a(e,n)),t)for(let s=0;s<r&&!e.closed;s++)e.next(o[s]);else for(let s=0;s<r&&!e.closed;s++)e.next(o[s].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),i}_getNow(){return(this.scheduler||Q.a).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,o=this._windowTime,n=this._events,r=n.length;let i=0;for(;i<r&&!(e-n[i].time<o);)i++;return r>t&&(i=Math.max(i,r-t)),i>0&&n.splice(0,i),n}}class D{constructor(e,t){this.time=e,this.value=t}}class A extends k.a{constructor(){super(...arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}_subscribe(e){return this.hasError?(e.error(this.thrownError),N.a.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),N.a.EMPTY):super._subscribe(e)}next(e){this.hasCompleted||(this.value=e,this.hasNext=!0)}error(e){this.hasCompleted||super.error(e)}complete(){this.hasCompleted=!0,this.hasNext&&super.next(this.value),super.complete()}}o("mrSG");class q{}let G=(()=>{class e extends class{constructor(){}loadScript(e,t,o,n=null){if("undefined"!=typeof document&&!document.getElementById(e)){let e=document.createElement("script");e.async=!0,e.src=t,e.onload=o,n||(n=document.head),n.appendChild(e)}}}{constructor(e,t={scope:"email"}){super(),this.clientId=e,this.initOptions=t}initialize(){return new Promise((t,o)=>{try{this.loadScript(e.PROVIDER_ID,"https://apis.google.com/js/platform.js",()=>{gapi.load("auth2",()=>{this.auth2=gapi.auth2.init(Object.assign(Object.assign({},this.initOptions),{client_id:this.clientId})),this.auth2.then(()=>{t()}).catch(e=>{o(e)})})})}catch(n){o(n)}})}getLoginStatus(t){const o=Object.assign(Object.assign({},this.initOptions),t);return new Promise((t,n)=>{if(this.auth2.isSignedIn.get()){let e=new q;const n=this.auth2.currentUser.get().getBasicProfile(),r=this.auth2.currentUser.get().getAuthResponse(!0);e.id=n.getId(),e.name=n.getName(),e.email=n.getEmail(),e.photoUrl=n.getImageUrl(),e.firstName=n.getGivenName(),e.lastName=n.getFamilyName(),e.response=r;const i=o=>{e.authToken=o.access_token,e.idToken=o.id_token,t(e)};o.refreshToken?this.auth2.currentUser.get().reloadAuthResponse().then(i):i(this.auth2.currentUser.get().getAuthResponse(!0))}else n(`No user is currently logged in with ${e.PROVIDER_ID}`)})}signIn(e){const t=Object.assign(Object.assign({},this.initOptions),e);return new Promise((o,n)=>{(t&&t.offline_access?this.auth2.grantOfflineAccess(e):this.auth2.signIn(e)).then(e=>{let t=new q;if(e&&e.code)t.authorizationCode=e.code;else{let e=this.auth2.currentUser.get().getBasicProfile(),o=this.auth2.currentUser.get().getAuthResponse(!0),n=o.access_token,r=o.id_token;t.id=e.getId(),t.name=e.getName(),t.email=e.getEmail(),t.photoUrl=e.getImageUrl(),t.firstName=e.getGivenName(),t.lastName=e.getFamilyName(),t.authToken=n,t.idToken=r,t.response=o}o(t)},e=>{n(e)}).catch(e=>{n(e)})})}signOut(e){return new Promise((t,o)=>{let n;n=e?this.auth2.disconnect():this.auth2.signOut(),n.then(e=>{e?o(e):t()}).catch(e=>{o(e)})})}}return e.PROVIDER_ID="GOOGLE",e})(),B=(()=>{class e{constructor(e){this.providers=new Map,this.autoLogin=!1,this._user=null,this._authState=new z(1),this.initialized=!1,this._initState=new A,e instanceof Promise?e.then(e=>{this.initialize(e)}):this.initialize(e)}get authState(){return this._authState.asObservable()}get initState(){return this._initState.asObservable()}initialize(e){this.autoLogin=void 0!==e.autoLogin&&e.autoLogin;const{onError:t=console.error}=e;e.providers.forEach(e=>{this.providers.set(e.id,e.provider)}),Promise.all(Array.from(this.providers.values()).map(e=>e.initialize())).then(()=>{if(this.autoLogin){const e=[];let t=!1;this.providers.forEach((o,n)=>{let r=o.getLoginStatus();e.push(r),r.then(e=>{e.provider=n,this._user=e,this._authState.next(e),t=!0}).catch(console.debug)}),Promise.all(e).catch(()=>{t||(this._user=null,this._authState.next(null))})}}).catch(e=>{t(e)}).finally(()=>{this.initialized=!0,this._initState.next(this.initialized),this._initState.complete()})}refreshAuthToken(t){return new Promise((o,n)=>{if(this.initialized)if(t!==G.PROVIDER_ID)n(e.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN);else{const r=this.providers.get(t);r?r.getLoginStatus({refreshToken:!0}).then(e=>{e.provider=t,this._user=e,this._authState.next(e),o()}).catch(e=>{n(e)}):n(e.ERR_LOGIN_PROVIDER_NOT_FOUND)}else n(e.ERR_NOT_INITIALIZED)})}signIn(t,o){return new Promise((n,r)=>{if(this.initialized){let i=this.providers.get(t);i?i.signIn(o).then(e=>{e.provider=t,n(e),this._user=e,this._authState.next(e)}).catch(e=>{r(e)}):r(e.ERR_LOGIN_PROVIDER_NOT_FOUND)}else r(e.ERR_NOT_INITIALIZED)})}signOut(t=!1){return new Promise((o,n)=>{if(this.initialized)if(this._user){let r=this.providers.get(this._user.provider);r?r.signOut(t).then(()=>{o(),this._user=null,this._authState.next(null)}).catch(e=>{n(e)}):n(e.ERR_LOGIN_PROVIDER_NOT_FOUND)}else n(e.ERR_NOT_LOGGED_IN);else n(e.ERR_NOT_INITIALIZED)})}}return e.\u0275fac=function(t){return new(t||e)(r.Yb("SocialAuthServiceConfig"))},e.\u0275prov=r.Hb({token:e,factory:e.\u0275fac}),e.ERR_LOGIN_PROVIDER_NOT_FOUND="Login provider not found",e.ERR_NOT_LOGGED_IN="Not logged in",e.ERR_NOT_INITIALIZED="Login providers not ready yet. Are there errors on your console?",e.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN="Chosen login provider is not supported for refreshing a token",e})(),U=(()=>{class e{constructor(e){if(e)throw new Error("SocialLoginModule is already loaded. Import it in the AppModule only")}static initialize(t){return{ngModule:e,providers:[B,{provide:"SocialAuthServiceConfig",useValue:t}]}}}return e.\u0275fac=function(t){return new(t||e)(r.Yb(e,12))},e.\u0275mod=r.Jb({type:e}),e.\u0275inj=r.Ib({providers:[B],imports:[[n.b]]}),e})();class j{constructor(e){this.id_token=e}}var V=o("tk/3"),Y=o("AytR");const W={headers:new V.d({"Content-Type":"application/json"})};let H=(()=>{class e{constructor(e){this.http=e}signIn(e){return this.http.post(`${Y.a.server}/auth/login`,e)}signInWithGoogle(e){return this.http.post(`${Y.a.server}/auth/google`,e,W)}}return e.\u0275fac=function(t){return new(t||e)(r.Yb(V.b))},e.\u0275prov=r.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Z(e,t){1&e&&(r.Rb(0,"div"),r.yc(1," Este campo es obligatorio. "),r.Qb())}function J(e,t){1&e&&(r.Rb(0,"div"),r.yc(1," Correo inv\xe1lido. "),r.Qb())}function X(e,t){if(1&e&&(r.Rb(0,"div",25),r.wc(1,Z,2,0,"div",26),r.wc(2,J,2,0,"div",26),r.Qb()),2&e){const e=r.dc();r.zb(1),r.ic("ngIf",null==e.getControl.email.errors?null:e.getControl.email.errors.required),r.zb(1),r.ic("ngIf",null==e.getControl.email.errors?null:e.getControl.email.errors.email)}}function K(e,t){1&e&&(r.Rb(0,"div"),r.yc(1," Este campo es obligatorio. "),r.Qb())}function ee(e,t){if(1&e&&(r.Rb(0,"div",25),r.wc(1,K,2,0,"div",26),r.Qb()),2&e){const e=r.dc();r.zb(1),r.ic("ngIf",null==e.getControl.password.errors?null:e.getControl.password.errors.required)}}function te(e,t){if(1&e&&(r.Rb(0,"li"),r.yc(1),r.Qb()),2&e){const e=t.$implicit;r.zb(1),r.Ac(" ",e," ")}}function oe(e,t){if(1&e&&(r.Rb(0,"div",27),r.Rb(1,"b"),r.yc(2,"Han ocurrido los siguientes errores:"),r.Qb(),r.Mb(3,"br"),r.Mb(4,"hr"),r.wc(5,te,2,1,"li",28),r.Qb()),2&e){const e=r.dc();r.zb(5),r.ic("ngForOf",e.errorsList)}}function ne(e,t){1&e&&r.Mb(0,"div")}function re(e,t){1&e&&r.Mb(0,"div")}function ie(e,t){1&e&&(r.Rb(0,"button",31),r.yc(1," Autenticar "),r.Qb())}function se(e,t){1&e&&(r.Rb(0,"button",32),r.Mb(1,"span",33),r.Mb(2,"span",33),r.Mb(3,"span",33),r.Qb())}function ae(e,t){if(1&e&&(r.wc(0,re,1,0,"div",17),r.wc(1,ie,2,0,"ng-template",null,29,r.xc),r.wc(3,se,4,0,"ng-template",null,30,r.xc)),2&e){const e=r.pc(2),t=r.pc(4),o=r.dc();r.ic("ngIf",!o.loading)("ngIfThen",e)("ngIfElse",t)}}function le(e,t){1&e&&(r.Rb(0,"button",34),r.yc(1," Autenticar "),r.Qb())}const ce=[{path:"login",component:(()=>{class e{constructor(e,t,o,n,r){this.authServiceSocial=e,this.loginService=t,this.tokenStorage=o,this.router=n,this.formBuilder=r,this.user=new q,this.loggedIn=!1,this.loading=!1,this.isLoggedIn=!1,this.isLoggedFailed=!1,this.errorMessage="",this.existError=!1,this.errorsList=[],this.roles=[],this.show=!1}ngOnInit(){activee($),this.loginForm=this.formBuilder.group({email:new l.d("",[l.r.required,l.r.email]),password:new l.d("",[l.r.required])}),this.authServiceSocial.authState.subscribe(e=>{this.user=e,this.loggedIn=null!=e})}onSubmit(){var e,t;this.loading=!0,this.errorsList=[],this.existError=!1;const o=new FormData;o.append("email",null===(e=this.loginForm.get("email"))||void 0===e?void 0:e.value),o.append("password",null===(t=this.loginForm.get("password"))||void 0===t?void 0:t.value),console.log(o.get("email")),console.log(o.get("password")),this.loginService.signIn(o).subscribe({next:e=>{var t;console.log(null===(t=e.user.rol)||void 0===t?void 0:t.rol),this.tokenStorage.saveToken(e.token),this.tokenStorage.saveId(e.user.uid),this.tokenStorage.saveUsername(e.user.name),this.tokenStorage.saveAuthorities(e.user.rol.rol),console.log(E.a.USER_ROLE.toString()),this.loading=!1,E.a.USER_ROLE.toString()===e.user.rol.rol?this.router.navigate(["/"]):this.router.navigate(["/dashboard"])},complete:()=>{this.loading=!1},error:e=>{this.errorsList.push(e.error.msg?e.error.msg:e.error.errors[0].msg),this.existError=!0,this.loading=!1}})}signInWithGoogle(){this.authServiceSocial.signIn(G.PROVIDER_ID).then(e=>{console.log(e);const t=new j(e.idToken);this.loginService.signInWithGoogle(t).subscribe({next:e=>{console.log(e),this.tokenStorage.saveToken(e.token),this.tokenStorage.saveId(e.user.uid),this.tokenStorage.saveUsername(e.user.name),this.tokenStorage.saveAuthorities(e.user.rol.rol),console.log(window.sessionStorage),E.a.USER_ROLE.toString()===e.user.rol.rol?this.router.navigate(["/"]):this.router.navigate(["/dashboard"])},complete:()=>{},error:e=>{console.log(e),this.errorMessage=e.error.message,this.isLoggedFailed=!0,this.loading=!1}})})}signOut(){this.authServiceSocial.signOut()}refreshToken(){this.authServiceSocial.refreshAuthToken(G.PROVIDER_ID)}get getControl(){return this.loginForm.controls}}return e.\u0275fac=function(t){return new(t||e)(r.Lb(B),r.Lb(H),r.Lb(i.a),r.Lb(s.f),r.Lb(l.c))},e.\u0275cmp=r.Fb({type:e,selectors:[["app-login"]],decls:58,vars:7,consts:[[1,"property-submit-section","spad"],[1,"container"],[1,"row"],[1,"col","col-md-6","offset-md-3"],[1,"property-submit-form"],["novalidate","",3,"formGroup","ngSubmit"],[1,"text-center","row"],[1,"col-md-12"],["src","../../../../assets/img/logo.png","alt",""],["for","inputEmail",1,"left"],["type","email","id","inputEmail","placeholder","Ingrese correo electr\xf3nico","name","email","formControlName","email","tooltip","Email para la nueva cuenta.","required","","autofocus","",1,"form-control"],["class","text-danger",4,"ngIf"],["for","password",1,"left"],["type","password","id","password","name","password","formControlName","password","tooltip","Nombre del due\xf1o de la nueva cuenta.","required","","autofocus","",1,"form-control"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"left"],["routerLink","/auth/register","routerLinkActive","active"],[4,"ngIf","ngIfThen","ngIfElse"],["thenBlock",""],["elseBlock",""],["id","customBtn",1,"customGPlusSignIn",3,"click"],[1,"icon"],[1,"buttonText"],["aria-hidden","true",1,"fa","fa-heart"],["href","https://colorlib.com","target","_blank"],[1,"text-danger"],[4,"ngIf"],["role","alert",1,"alert","alert-danger"],[4,"ngFor","ngForOf"],["thenBlock1",""],["elseBlock1",""],["type","submit",1,"site-btn"],["type","button","disabled","",1,"site-btn"],["role","status","aria-hidden","true",1,"spinner-grow","spinner-grow-sm"],["type","submit","disabled","",1,"site-btn"]],template:function(e,t){if(1&e&&(r.Rb(0,"section",0),r.Rb(1,"div",1),r.Rb(2,"div",2),r.Rb(3,"div",3),r.Rb(4,"div",4),r.Rb(5,"form",5),r.bc("ngSubmit",function(){return t.onSubmit()}),r.Rb(6,"div",6),r.Rb(7,"div",7),r.Mb(8,"img",8),r.Mb(9,"br"),r.Mb(10,"br"),r.Rb(11,"h4"),r.yc(12,"Inciar Sesi\xf3n en el Sistema"),r.Qb(),r.Qb(),r.Rb(13,"div",7),r.Rb(14,"p",9),r.yc(15,"Correo:"),r.Qb(),r.Mb(16,"input",10),r.wc(17,X,3,2,"div",11),r.Mb(18,"br"),r.Mb(19,"br"),r.Qb(),r.Rb(20,"div",7),r.Rb(21,"p",12),r.yc(22,"Contrase\xf1a:"),r.Qb(),r.Mb(23,"input",13),r.wc(24,ee,2,1,"div",11),r.Mb(25,"br"),r.wc(26,oe,6,1,"div",14),r.Mb(27,"br"),r.Qb(),r.Rb(28,"div",7),r.Rb(29,"p",15),r.yc(30," No posees cuenta a\xfan? "),r.Rb(31,"a",16),r.yc(32,"Registrarse. "),r.Qb(),r.Qb(),r.Mb(33,"br"),r.Mb(34,"hr"),r.Mb(35,"br"),r.wc(36,ne,1,0,"div",17),r.wc(37,ae,5,3,"ng-template",null,18,r.xc),r.wc(39,le,2,0,"ng-template",null,19,r.xc),r.Mb(41,"br"),r.Mb(42,"br"),r.Rb(43,"div",20),r.bc("click",function(){return t.signInWithGoogle()}),r.Mb(44,"span",21),r.Rb(45,"span",22),r.yc(46,"Continuar Con Google"),r.Qb(),r.Qb(),r.Mb(47,"br"),r.Mb(48,"br"),r.Mb(49,"hr"),r.Rb(50,"div"),r.Rb(51,"p"),r.yc(52," Copyright \xa9 "),r.yc(53," All rights reserved | This template is made with "),r.Mb(54,"i",23),r.yc(55," by "),r.Rb(56,"a",24),r.yc(57,"Colorlib"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()),2&e){const e=r.pc(38),o=r.pc(40);r.zb(5),r.ic("formGroup",t.loginForm),r.zb(12),r.ic("ngIf",t.getControl.email.touched&&t.getControl.email.invalid),r.zb(7),r.ic("ngIf",t.getControl.password.touched&&t.getControl.password.invalid),r.zb(2),r.ic("ngIf",t.existError),r.zb(10),r.ic("ngIf",t.loginForm.valid)("ngIfThen",e)("ngIfElse",o)}},directives:[l.s,l.k,l.f,l.b,l.j,l.e,l.q,n.k,s.i,s.h,n.j],styles:["#login[_ngcontent-%COMP%]{background-color:#fff;padding-left:3rem;padding-right:3rem;box-shadow:0 2px 4px 0 rgba(0,0,0,.25)}.left[_ngcontent-%COMP%]{float:left}.spad[_ngcontent-%COMP%]{padding-top:50px!important}.g-signin2[_ngcontent-%COMP%]{width:100%}#customBtn[_ngcontent-%COMP%]{display:inline-block;background:#fff;color:#757575;width:100%;border-radius:5px;box-shadow:0 2px 4px 0 rgba(0,0,0,.25);box-sizing:border-box;transition:background-color .218s,border-color .218s,box-shadow .218s;-webkit-user-select:none;-webkit-appearance:none;background-color:#fff;background-image:none;cursor:pointer;outline:none;overflow:hidden;position:relative;text-align:center;vertical-align:middle;white-space:nowrap}#customBtn[_ngcontent-%COMP%]:hover{cursor:pointer;box-shadow:0 2px 4px 0 rgba(0,255,0,.25)}span.label[_ngcontent-%COMP%]{font-family:Dosis,sans-serif;font-weight:400}span.icon[_ngcontent-%COMP%]{background:url(/assets/img/logo-google/g-normal.png) transparent 5px 50% no-repeat;width:42px;height:42px}span.buttonText[_ngcontent-%COMP%], span.icon[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}span.buttonText[_ngcontent-%COMP%]{padding-right:42px;font-size:14px;font-weight:700;font-family:Dosis,sans-serif}.espaciado[_ngcontent-%COMP%]{padding:2rem!important;background-color:#fff;border-radius:5px}.site-btn[_ngcontent-%COMP%]{width:100%!important}.text-danger[_ngcontent-%COMP%]{float:left}.alert-danger[_ngcontent-%COMP%]{width:100%;float:left}b[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{float:left}.ng-valid.required[_ngcontent-%COMP%], .ng-valid[required][_ngcontent-%COMP%]{border-left:5px solid #00c89e}.ng-invalid[_ngcontent-%COMP%]:not(form){border-left:5px solid #a94442}.alert[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#fed3d3;color:#820000;padding:1rem}.alert[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]{margin-bottom:1rem}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem}select[_ngcontent-%COMP%]{width:100%;padding:.5rem}"]}),e})(),canActivate:[a]},{path:"register",component:S}];let ue=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Jb({type:e}),e.\u0275inj=r.Ib({imports:[[s.j.forChild(ce)],s.j]}),e})(),de=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Jb({type:e}),e.\u0275inj=r.Ib({providers:[{provide:"SocialAuthServiceConfig",useValue:{autoLogin:!1,providers:[{id:G.PROVIDER_ID,provider:new G("767767601506-k588irla2mtd18uvut6ej0ha8g0lbgpt.apps.googleusercontent.com")}]}}],imports:[[n.b,ue,U,l.g,l.p]]}),e})()},mrSG:function(e,t,o){"use strict";function n(e,t,o,n){return new(o||(o=Promise))(function(r,i){function s(e){try{l(n.next(e))}catch(t){i(t)}}function a(e){try{l(n.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})}o.d(t,"a",function(){return n})},qfBg:function(e,t,o){"use strict";o.d(t,"a",function(){return s});var n=o("tk/3"),r=o("AytR"),i=o("fXoL");new n.d({"Content-Type":"application/json"});let s=(()=>{class e{constructor(e){this.http=e}createUser(e){return this.http.post(`${r.a.server}/users`,e)}userById(e){return this.http.get(`${r.a.server}/users/${e}`)}userAgregaciones(e){return this.http.get(`${r.a.server}/users/agregaciones/${e}`)}userPut(e,t){return this.http.put(`${r.a.server}/users/${e}`,t)}}return e.\u0275fac=function(t){return new(t||e)(i.Yb(n.b))},e.\u0275prov=i.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);